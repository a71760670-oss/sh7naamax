<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SH7NA MAX | Ø´Ø­Ù†Ø© Ù…Ø§ÙƒØ³</title>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

<style>
    body { font-family: 'Cairo', sans-serif; background: #0f172a; color: white; margin: 0; padding: 0; }
    .card { background: #1e293b; border: 1px solid #334155; padding: 1rem; border-radius: 1rem; margin-bottom: 0.5rem; cursor: pointer; text-align: center; transition: 0.3s; }
    .card:hover { border-color: #22d3ee; }
    .active { border: 2px solid #22d3ee; background: #0f172a; }
    .disabled { opacity: .4; pointer-events: none; }
    button { cursor: pointer; border: none; border-radius: 0.75rem; transition: 0.3s; }
    button:active { transform: scale(0.95); }
    input { padding: 0.8rem; border-radius: 0.75rem; border: 1px solid #334155; background: #1e293b; color: white; width: 100%; margin-bottom: 0.5rem; text-align: center; outline: none; box-sizing: border-box; }
    .bg-cyan { background: #22d3ee; color: #0f172a; }
    .bg-green { background: #16a34a; color: white; }
    .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
    .flex { display: flex; gap: 0.5rem; }
    .flex-1 { flex: 1; }
    .p-4 { padding: 1rem; }
    .text-center { text-align: center; }
</style>
</head>
<body class="p-4 max-w-xl mx-auto">

<h1 class="text-center" style="font-weight: 900; color: #22d3ee; font-size: 2rem; margin-bottom: 1.5rem;">SH7NA MAX</h1>

<div id="home">
    <h2 style="font-size: 1.2rem; margin-bottom: 1rem;">Ø§Ø®ØªØ± Ø§Ù„Ù„Ø¹Ø¨Ø©:</h2>
    <div class="grid">
        <div onclick="openGame('ÙŠÙ„Ø§ Ù„ÙˆØ¯Ùˆ')" class="card">ÙŠÙ„Ø§ Ù„ÙˆØ¯Ùˆ</div>
        <div class="card disabled">PUBG (Ù‚Ø±ÙŠØ¨Ø§Ù‹)</div>
        <div class="card disabled">ÙØ±ÙŠ ÙØ§ÙŠØ± (Ù‚Ø±ÙŠØ¨Ø§Ù‹)</div>
        <div class="card disabled">TikTok (Ù‚Ø±ÙŠØ¨Ø§Ù‹)</div>
    </div>
</div>

<div id="game" style="display:none">
    <button onclick="backHome()" style="background: #334155; color: white; padding: 0.5rem 1rem; margin-bottom: 1rem;">â† Ø±Ø¬ÙˆØ¹</button>
    <h2 id="gameTitle" class="text-center" style="font-weight: 700;"></h2>
    <input id="playerId" type="text" placeholder="Ø§Ø¯Ø®Ù„ ID Ø§Ù„Ù„Ø§Ø¹Ø¨">
    
    <div class="flex" style="margin-bottom: 1rem;">
        <button onclick="showTab('gold')" class="flex-1" style="background:#facc15; padding: 0.75rem; font-weight: bold;">Ø°Ù‡Ø¨</button>
        <button onclick="showTab('gems')" class="flex-1" style="background:#ec4899; color: white; padding: 0.75rem; font-weight: bold;">Ù…Ø§Ø³Ø§Øª</button>
        <button onclick="showTab('vip')" class="flex-1" style="background:#a855f7; color: white; padding: 0.75rem; font-weight: bold;">VIP</button>
    </div>
    
    <div id="packages"></div>
    <button onclick="goToPay()" class="bg-cyan w-full" style="padding: 1rem; font-weight: 900; margin-top: 1rem; font-size: 1.1rem;">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¯ÙØ¹</button>
</div>

<div id="pay" style="display:none">
    <button onclick="document.getElementById('pay').style.display='none'; document.getElementById('game').style.display='block';" style="background: #334155; color: white; padding: 0.5rem 1rem; margin-bottom: 1rem;">â† Ø±Ø¬ÙˆØ¹</button>
    <h2 class="text-center" style="font-weight: 700; color: #22d3ee;">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„</h2>
    <p class="text-center">Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù„Ù‰ Ù…Ø­ÙØ¸Ø© ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´:</p>
    <p class="text-center" style="font-size: 1.8rem; font-weight: 900; color: #fff; margin: 10px 0;" id="walletNumberDisplay">01115616787</p>
    
    <input id="fromNumber" type="number" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°ÙŠ Ø­ÙˆÙ„Øª Ù…Ù†Ù‡">
    <input id="amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨ØªØ­ÙˆÙŠÙ„Ù‡">
    <p style="font-size: 0.8rem; color: #94a3b8; text-align: center; margin-bottom: 5px;">Ø§Ø±ÙÙ‚ Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:</p>
    <input type="file" id="image" accept="image/*">
    
    <button onclick="finishOrder()" class="bg-green w-full" style="padding: 1rem; font-weight: 900; font-size: 1.2rem; margin-top: 1rem;">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø­Ù† Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ğŸš€</button>
</div>

<script>
// --- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ---
const apiKey = "wps_46a97b93dbfcda249961351794d0812e831aef99d05c2e8063ec18c218ac18bd";
const instanceId = "User_156_9c4d4668-552b-4c45-be39-a8a9fa89816a";
const myWhatsApp = "201007885684"; // Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø°ÙŠ Ø³ØªØµÙ„Ù‡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
const telegramLink = "https://t.me/sh7namax"; // Ù‚Ù†Ø§Ø© Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
const walletNumber = "01115616787";

let selectedPackage = null;
let selectedPrice = null;
let currentGame = "";

const goldPackages = [{qty:"10K Ø°Ù‡Ø¨",price:50},{qty:"25K Ø°Ù‡Ø¨",price:100},{qty:"50K Ø°Ù‡Ø¨",price:180}];
const gemsPackages = [{qty:"100 Ù…Ø§Ø³Ø©",price:40},{qty:"250 Ù…Ø§Ø³Ø©",price:90}];
const vipPackages = [{qty:"ÙØ§Ø±Ø³ VIP",price:150}];

function openGame(name){
    currentGame = name;
    document.getElementById('gameTitle').innerText = "Ø´Ø­Ù† " + name;
    document.getElementById('home').style.display = 'none';
    document.getElementById('game').style.display = 'block';
    showTab('gold');
}

function backHome(){
    document.getElementById('game').style.display = 'none';
    document.getElementById('home').style.display = 'block';
}

function showTab(type){
    let list = (type==='gold') ? goldPackages : (type==='gems' ? gemsPackages : vipPackages);
    let html = '';
    list.forEach(p => {
        html += `<div onclick="selectPkg(this,'${p.qty}',${p.price})" class="card flex justify-between"><span>${p.qty}</span><span style="color:#22d3ee; font-weight:bold;">${p.price} Ø¬</span></div>`;
    });
    document.getElementById('packages').innerHTML = html;
}

function selectPkg(el, qty, price){
    selectedPackage = qty;
    selectedPrice = price;
    document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
}

function goToPay(){
    let id = document.getElementById('playerId').value;
    if(!selectedPackage || !id){ Swal.fire('ØªÙ†Ø¨ÙŠÙ‡','ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ID Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø©','warning'); return; }
    document.getElementById('game').style.display = 'none';
    document.getElementById('pay').style.display = 'block';
}

// ÙˆØ¸ÙŠÙØ© Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
async function checkImage(file){
    return new Promise((resolve) => {
        Tesseract.recognize(file, 'ara').then(({data:{text}}) => {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¢Ø®Ø± 5 Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ù…Ø­ÙØ¸ØªÙƒ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©
            const isValid = text.includes(walletNumber.slice(-5));
            resolve(isValid);
        }).catch(() => resolve(false));
    });
}

// Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
async function finishOrder(){
    let id = document.getElementById('playerId').value;
    let from = document.getElementById('fromNumber').value;
    let amountVal = document.getElementById('amount').value;
    let file = document.getElementById('image').files[0];

    if(!from || !amountVal || !file){ Swal.fire('Ø®Ø·Ø£','ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„','error'); return; }

    Swal.fire({ title: 'Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©...', allowOutsideClick: false, didOpen: () => { Swal.showLoading(); }});

    let isReal = await checkImage(file);
    if(!isReal){ Swal.fire('ÙØ´Ù„ Ø§Ù„ÙØ­Øµ','ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø© Ø£Ùˆ ØºÙŠØ± ÙˆØ§Ø¶Ø­Ø©','error'); return; }

    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ùƒ
    const message = `ğŸš€ *Ø·Ù„Ø¨ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯* ğŸš€\n\nğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø©: ${currentGame}\nğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø©: ${selectedPackage}\nğŸ†” ID Ø§Ù„Ù„Ø§Ø¹Ø¨: ${id}\nğŸ“± Ù…Ù† Ø±Ù‚Ù…: ${from}\nâœ… Ø§Ù„Ø­Ø§Ù„Ø©: ØªÙ… Ø§Ù„ÙØ­Øµ Ø¨Ù†Ø¬Ø§Ø­`;

    // Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± API Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø®ÙÙŠ)
    fetch('https://backendapi.wpsenderx.com/api/sendMessage', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'X-API-Key': apiKey },
        body: JSON.stringify({ 
            instance_id: instanceId, 
            phone: myWhatsApp, 
            message: message 
        })
    }).then(res => {
        if(res.ok){
            Swal.fire('ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… âœ…','Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒØŒ Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨','success').then(() => {
                window.location.href = telegramLink;
            });
        } else {
            Swal.fire('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„','Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹','error');
        }
    }).catch(() => Swal.fire('Ø®Ø·Ø£','ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø³ÙŠØ±ÙØ± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„','error'));
}
</script>
</body>
</html>